# Accomodation Project (Computational Thinking)
## ğŸ“‹ Má»¥c Lá»¥c

- [TÃ­nh NÄƒng Ná»•i Báº­t](#-tÃ­nh-nÄƒng-ná»•i-báº­t)
- [HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng](#-hÆ°á»›ng-dáº«n-sá»­-dá»¥ng)
- [Cáº¥u TrÃºc File](#-cáº¥u-trÃºc-file)
- [CÃ´ng Nghá»‡ Sá»­ Dá»¥ng](#-cÃ´ng-nghá»‡-sá»­-dá»¥ng)
- [API Keys Cáº§n Thiáº¿t](#-api-keys-cáº§n-thiáº¿t)

---

## TÃ­nh NÄƒng Ná»•i Báº­t

### AI-Powered Features

#### 1. **Smart Ranking Engine**
- Tá»± Ä‘á»™ng cháº¥m Ä‘iá»ƒm vÃ  sáº¯p xáº¿p káº¿t quáº£ tÃ¬m kiáº¿m dá»±a trÃªn Ä‘á»™ phÃ¹ há»£p vá»›i há»“ sÆ¡ ngÆ°á»i dÃ¹ng
- KhÃ´ng chá»‰ sáº¯p xáº¿p theo giÃ¡ hay Ä‘Ã¡nh giÃ¡, mÃ  cÃ²n dá»±a trÃªn sá»Ÿ thÃ­ch cÃ¡ nhÃ¢n
- Hiá»ƒn thá»‹ lÃ½ do cá»¥ thá»ƒ "Táº¡i sao khÃ¡ch sáº¡n nÃ y há»£p vá»›i báº¡n" (vÃ­ dá»¥: "90% Match - VÃ¬ cÃ³ Spa yÃªn tÄ©nh")

#### 2. **AI Chatbot ThÃ´ng Minh**
- Chatbot ghi nhá»› lá»‹ch sá»­ trÃ² chuyá»‡n vÃ  hiá»ƒu rÃµ sá»Ÿ thÃ­ch ngÆ°á»i dÃ¹ng
- TÆ° váº¥n cÃ¡ nhÃ¢n hÃ³a dá»±a trÃªn há»“ sÆ¡ ngÆ°á»i dÃ¹ng (Vibe, Companion, Budget)
- Há»— trá»£ tÃ¬m kiáº¿m báº±ng ngÃ´n ngá»¯ tá»± nhiÃªn
- PhÃ¢n tÃ­ch vÃ  trÃ­ch xuáº¥t thÃ´ng tin tá»« cuá»™c há»™i thoáº¡i Ä‘á»ƒ tÃ¬m kiáº¿m chÃ­nh xÃ¡c

#### 3. **Auto-Fill ThÃ´ng Minh**
- Tá»± Ä‘á»™ng Ä‘iá»n bá»™ lá»c (Price, Stars, Amenities) dá»±a trÃªn preferences cá»§a ngÆ°á»i dÃ¹ng
- Gá»£i Ã½ Ä‘á»‹a Ä‘iá»ƒm dá»±a trÃªn lá»‹ch sá»­ xem khÃ¡ch sáº¡n
- Tá»± Ä‘á»™ng Ä‘á» xuáº¥t khÃ¡ch sáº¡n phÃ¹ há»£p khi ngÆ°á»i dÃ¹ng chÆ°a cÃ³ lá»‹ch sá»­

#### 4. **Passive Learning System**
- Tá»± Ä‘á»™ng há»c vÃ  cáº­p nháº­t Budget vÃ  Vibe cá»§a ngÆ°á»i dÃ¹ng dá»±a trÃªn lá»‹ch sá»­ xem phÃ²ng (sau 3-4 láº§n xem)
- PhÃ¢n tÃ­ch amenities Ä‘á»ƒ cáº­p nháº­t preferences (vÃ­ dá»¥: spa/yoga â†’ Healing, gym/hiking â†’ Adventure)
- Cáº­p nháº­t tá»± Ä‘á»™ng vibe khi phÃ¡t hiá»‡n pattern trong hÃ nh vi ngÆ°á»i dÃ¹ng

#### 5. **Genie AI - Äá» Xuáº¥t Lá»‹ch TrÃ¬nh**
- Táº¡o lá»‹ch trÃ¬nh du lá»‹ch cÃ¡ nhÃ¢n hÃ³a táº¡i khÃ¡ch sáº¡n cá»¥ thá»ƒ
- Dá»±a trÃªn vibe vÃ  sá»Ÿ thÃ­ch cá»§a ngÆ°á»i dÃ¹ng
- TÃ­ch há»£p trong trang chi tiáº¿t khÃ¡ch sáº¡n

#### 6. **AI TÃ³m Táº¯t Reviews**
- Tá»± Ä‘á»™ng tÃ³m táº¯t tá»‘i Ä‘a 20 reviews gáº§n nháº¥t cá»§a khÃ¡ch sáº¡n
- GiÃºp ngÆ°á»i dÃ¹ng nhanh chÃ³ng náº¯m báº¯t Ã½ kiáº¿n cá»§a cá»™ng Ä‘á»“ng

#### 7. **So SÃ¡nh KhÃ¡ch Sáº¡n vá»›i AI**
- So sÃ¡nh 2-3 khÃ¡ch sáº¡n cÃ¹ng lÃºc
- AI tÃ³m táº¯t vÃ  phÃ¢n tÃ­ch Ä‘iá»ƒm máº¡nh/yáº¿u cá»§a tá»«ng khÃ¡ch sáº¡n

#### 8. **PhÃ¢n TÃ­ch áº¢nh & Search Theo Mood**
- TÃ¬m kiáº¿m khÃ¡ch sáº¡n dá»±a trÃªn mood vÃ  phÃ¢n tÃ­ch hÃ¬nh áº£nh
- Gá»£i Ã½ khÃ¡ch sáº¡n phÃ¹ há»£p vá»›i cáº£m xÃºc vÃ  mong muá»‘n cá»§a ngÆ°á»i dÃ¹ng

### Core Features

- **TÃ¬m Kiáº¿m NÃ¢ng Cao**: Filter theo Ä‘á»‹a Ä‘iá»ƒm, má»©c giÃ¡, má»©c sao, tiá»‡n nghi
- **Há»‡ Thá»‘ng ÄÃ¡nh GiÃ¡**: NgÆ°á»i dÃ¹ng cÃ³ thá»ƒ Ä‘á»ƒ láº¡i reviews vÃ  ratings
- **YÃªu ThÃ­ch**: LÆ°u danh sÃ¡ch khÃ¡ch sáº¡n yÃªu thÃ­ch
- **Lá»‹ch Sá»­ Xem**: Theo dÃµi cÃ¡c khÃ¡ch sáº¡n Ä‘Ã£ xem
- **Cache ThÃ´ng Minh**: Cache káº¿t quáº£ tÃ¬m kiáº¿m vÃ  thÃ´ng tin khÃ¡ch sáº¡n (tá»± Ä‘á»™ng reload sau 5 ngÃ y)
- **UI/UX Hiá»‡n Äáº¡i**: Giao diá»‡n trá»±c quan, dá»… sá»­ dá»¥ng

---


## Cáº¥u HÃ¬nh Environment Variables

Táº¡o file `.env` trong thÆ° má»¥c gá»‘c cá»§a project vá»›i ná»™i dung:

```env
SERPAPI_KEY=your_serpapi_key_here
GEMINI_API_KEY=your_gemini_api_key_here
APP_SECRET=your_secret_key_here
```

**LÆ°u Ã½**: 
- Láº¥y `SERPAPI_KEY` tá»« [SerpAPI](https://serpapi.com/)
- Láº¥y `GEMINI_API_KEY` tá»« [Google AI Studio](https://makersuite.google.com/app/apikey)
- `APP_SECRET` cÃ³ thá»ƒ lÃ  báº¥t ká»³ chuá»—i ngáº«u nhiÃªn nÃ o (dÃ¹ng Ä‘á»ƒ mÃ£ hÃ³a session)

---

## ğŸ“– HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng

### ÄÄƒng KÃ½ & ÄÄƒng Nháº­p

1. Truy cáº­p trang chá»§ vÃ  Ä‘Äƒng kÃ½ tÃ i khoáº£n má»›i
2. ÄÄƒng nháº­p láº§n Ä‘áº§u, báº¡n sáº½ Ä‘Æ°á»£c yÃªu cáº§u Ä‘iá»n kháº£o sÃ¡t nhá»:
   - **Vibe**: Phong cÃ¡ch du lá»‹ch (Luxury, Adventure, Healing, v.v.)
   - **Companion**: Äi cÃ¹ng ai (Cáº·p Ä‘Ã´i, Gia Ä‘Ã¬nh, Báº¡n bÃ¨, v.v.)
   - **Budget**: NgÃ¢n sÃ¡ch (Tháº¥p, Trung bÃ¬nh, Cao)

### TÃ¬m Kiáº¿m KhÃ¡ch Sáº¡n

#### CÃ¡ch 1: Sá»­ Dá»¥ng Filter Truyá»n Thá»‘ng

1. Chá»n **Äá»‹a Ä‘iá»ƒm** (báº¯t buá»™c)
2. TÃ¹y chá»n: Chá»n **Má»©c giÃ¡**, **Má»©c sao**, **Tiá»‡n nghi**
3. Báº­t **AI Auto-fill** Ä‘á»ƒ há»‡ thá»‘ng tá»± Ä‘á»™ng Ä‘iá»n dá»±a trÃªn preferences
4. Nháº¥n "TÃ¬m kiáº¿m"

#### CÃ¡ch 2: Sá»­ Dá»¥ng AI Chatbot

1. Má»Ÿ chatbot trÃªn trang chá»§ hoáº·c trang káº¿t quáº£
2. TrÃ² chuyá»‡n tá»± nhiÃªn, vÃ­ dá»¥:
   - "TÃ¬m khÃ¡ch sáº¡n á»Ÿ ÄÃ  Láº¡t cÃ³ bá»ƒ bÆ¡i"
   - "KhÃ¡ch sáº¡n 4 sao á»Ÿ HÃ  Ná»™i giÃ¡ dÆ°á»›i 2 triá»‡u"
3. Chatbot sáº½ tá»± Ä‘á»™ng phÃ¢n tÃ­ch vÃ  tÃ¬m kiáº¿m

### Xem Chi Tiáº¿t KhÃ¡ch Sáº¡n

- Click vÃ o khÃ¡ch sáº¡n Ä‘á»ƒ xem thÃ´ng tin chi tiáº¿t
- Xem lÃ½ do "Táº¡i sao khÃ¡ch sáº¡n nÃ y há»£p vá»›i báº¡n"
- Xem AI tÃ³m táº¯t reviews
- Sá»­ dá»¥ng Genie AI Ä‘á»ƒ táº¡o lá»‹ch trÃ¬nh du lá»‹ch
- ThÃªm vÃ o yÃªu thÃ­ch hoáº·c Ä‘á»ƒ láº¡i review

### So SÃ¡nh KhÃ¡ch Sáº¡n

1. Trong trang káº¿t quáº£, chá»n 2-3 khÃ¡ch sáº¡n Ä‘á»ƒ so sÃ¡nh
2. Xem báº£ng so sÃ¡nh chi tiáº¿t
3. Äá»c AI tÃ³m táº¯t so sÃ¡nh Ä‘á»ƒ Ä‘Æ°a ra quyáº¿t Ä‘á»‹nh

### Quáº£n LÃ½ YÃªu ThÃ­ch & Lá»‹ch Sá»­

- Xem danh sÃ¡ch yÃªu thÃ­ch: Menu â†’ My Favorites
- Xem lá»‹ch sá»­: Menu â†’ History

---

## Cáº¥u TrÃºc File

```
Project/
â”‚
â”œâ”€â”€ .env                          # Environment variables (API keys)
â”œâ”€â”€ .gitignore                    # Git ignore file
â”œâ”€â”€ README.md                     # File nÃ y
â”œâ”€â”€ requirements.txt              # Python dependencies
â”œâ”€â”€ run.py                        # Entry point cá»§a á»©ng dá»¥ng
â”œâ”€â”€ user_db.db                    # SQLite database (tá»± Ä‘á»™ng táº¡o)
â”‚
â””â”€â”€ app/                          # ThÆ° má»¥c chÃ­nh cá»§a á»©ng dá»¥ng
    â”‚
    â”œâ”€â”€ __init__.py               # Flask app factory
    â”œâ”€â”€ database.py               # Database connection & utilities
    â”œâ”€â”€ schema.sql                # Database schema
    â”œâ”€â”€ utils.py                  # Utility functions (AI helpers, scoring)
    â”‚
    â”œâ”€â”€ blueprints/               # Flask blueprints (routes)
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ api.py                # API endpoints (chatbot, AI features)
    â”‚   â”œâ”€â”€ auth.py               # Authentication routes (login, register)
    â”‚   â”œâ”€â”€ hotel.py              # Hotel search & detail routes
    â”‚   â””â”€â”€ main.py               # Main routes (home, profile)
    â”‚
    â”œâ”€â”€ services/                 # Business logic services
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â””â”€â”€ search_service.py     # Hotel search service (SerpAPI integration)
    â”‚
    â”œâ”€â”€ static/                   # Static files (CSS, JS, images)
    â”‚   â”œâ”€â”€ css/
    â”‚   â”‚   â”œâ”€â”€ base.css          # Base styles
    â”‚   â”‚   â”œâ”€â”€ hotel.css         # Hotel page styles
    â”‚   â”‚   â””â”€â”€ index.css         # Home page styles
    â”‚   â”‚
    â”‚   â””â”€â”€ js/
    â”‚       â”œâ”€â”€ base.js           # Base JavaScript utilities
    â”‚       â”œâ”€â”€ hotel.js          # Hotel page JavaScript
    â”‚       â””â”€â”€ index.js          # Home page JavaScript
    â”‚
    â””â”€â”€ templates/                # Jinja2 templates
        â”œâ”€â”€ base.html             # Base template
        â”œâ”€â”€ index.html            # Home page
        â”‚
        â”œâ”€â”€ auth/
        â”‚   â””â”€â”€ profile.html      # User profile page
        â”‚
        â”œâ”€â”€ hotel/
        â”‚   â”œâ”€â”€ hotel_detail.html # Hotel detail page
        â”‚   â””â”€â”€ hotel_results.html # Search results page
        â”‚
        â””â”€â”€ user/
            â”œâ”€â”€ favorites.html    # Favorites page
            â””â”€â”€ history.html      # View history page
```

### MÃ´ Táº£ CÃ¡c ThÃ nh Pháº§n ChÃ­nh

#### `app/__init__.py`
- Khá»Ÿi táº¡o Flask application
- ÄÄƒng kÃ½ blueprints
- Cáº¥u hÃ¬nh database vÃ  session

#### `app/database.py`
- Quáº£n lÃ½ káº¿t ná»‘i SQLite
- CÃ¡c hÃ m tiá»‡n Ã­ch cho database operations

#### `app/utils.py`
- CÃ¡c hÃ m AI helper: `calculate_match_score()`, `get_ai_preferences()`, `generate_ai_suggestion()`
- Xá»­ lÃ½ preferences vÃ  scoring logic

#### `app/blueprints/api.py`
- API endpoints cho chatbot
- AI features: tÃ³m táº¯t reviews, so sÃ¡nh khÃ¡ch sáº¡n, táº¡o lá»‹ch trÃ¬nh

#### `app/blueprints/hotel.py`
- Routes cho tÃ¬m kiáº¿m vÃ  xem chi tiáº¿t khÃ¡ch sáº¡n
- Xá»­ lÃ½ filter vÃ  ranking

#### `app/services/search_service.py`
- TÃ­ch há»£p vá»›i SerpAPI
- Xá»­ lÃ½ tÃ¬m kiáº¿m vÃ  cache káº¿t quáº£

#### Database Schema
- `users`: ThÃ´ng tin ngÆ°á»i dÃ¹ng vÃ  preferences
- `favorite_places`: KhÃ¡ch sáº¡n yÃªu thÃ­ch
- `search_cache`: Cache káº¿t quáº£ tÃ¬m kiáº¿m
- `hotel_cache`: Cache thÃ´ng tin chi tiáº¿t khÃ¡ch sáº¡n
- `user_reviews`: Reviews cá»§a ngÆ°á»i dÃ¹ng
- `recently_viewed`: Lá»‹ch sá»­ xem khÃ¡ch sáº¡n
- `review_summaries`: AI tÃ³m táº¯t reviews
- `hotel_itineraries`: Lá»‹ch trÃ¬nh du lá»‹ch Ä‘Æ°á»£c táº¡o bá»Ÿi AI

## ğŸ›  CÃ´ng Nghá»‡ Sá»­ Dá»¥ng

### Backend
- **Flask**: Web framework
- **SQLite**: Database
- **Werkzeug**: Security utilities (password hashing)

### AI & APIs
- **Google Gemini API**: AI chatbot, tÃ³m táº¯t, so sÃ¡nh
- **SerpAPI**: TÃ¬m kiáº¿m khÃ¡ch sáº¡n tá»« Google Hotels

### Frontend
- **HTML5/CSS3**: Giao diá»‡n ngÆ°á»i dÃ¹ng
- **JavaScript**: TÆ°Æ¡ng tÃ¡c phÃ­a client
- **Jinja2**: Template engine

### Utilities
- **python-dotenv**: Quáº£n lÃ½ environment variables
- **Pillow**: Xá»­ lÃ½ hÃ¬nh áº£nh
- **pandas**: Xá»­ lÃ½ dá»¯ liá»‡u (náº¿u cáº§n)
- **requests**: HTTP requests

---

## API Keys Cáº§n Thiáº¿t

### 1. SerpAPI Key
- **Má»¥c Ä‘Ã­ch**: TÃ¬m kiáº¿m khÃ¡ch sáº¡n tá»« Google Hotels
- **Láº¥y key**: [https://serpapi.com/](https://serpapi.com/)
- **Documentation**: [https://serpapi.com/google-hotels-api](https://serpapi.com/google-hotels-api)

### 2. Gemini API Key
- **Má»¥c Ä‘Ã­ch**: AI features (chatbot, tÃ³m táº¯t, so sÃ¡nh)
- **Láº¥y key**: [https://makersuite.google.com/app/apikey](https://makersuite.google.com/app/apikey)
- **Documentation**: [https://pypi.org/project/google-genai/](https://pypi.org/project/google-genai/)

---

## Notes

- Database sáº½ tá»± Ä‘á»™ng Ä‘Æ°á»£c táº¡o khi cháº¡y á»©ng dá»¥ng láº§n Ä‘áº§u
- Cache Ä‘Æ°á»£c tá»± Ä‘á»™ng reload sau 5 ngÃ y
- á»¨ng dá»¥ng cháº¡y á»Ÿ cháº¿ Ä‘á»™ debug máº·c Ä‘á»‹nh (cÃ³ thá»ƒ táº¯t trong `run.py`)

---

## TÃ i Liá»‡u Tham Kháº£o

- [SerpAPI Documentation](https://serpapi.com/google-hotels-api)
- [Google Gemini API](https://pypi.org/project/google-genai/)
- [Flask Documentation](https://flask.palletsprojects.com/)